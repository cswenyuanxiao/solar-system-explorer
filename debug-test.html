<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test - Solar System Explorer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .lang-btn { background: #0B3D91; color: white; }
        .theme-btn { background: #28a745; color: white; }
        #status {
            background: #333;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>🔧 Debug Test Page</h1>
    
    <div class="test-section">
        <h2>语言切换测试</h2>
        <button id="lang-test" class="lang-btn">
            <span id="debug-flag">🇺🇸</span>
            <span id="debug-name">English</span>
        </button>
        <div id="status">当前语言: <span id="current-lang">--</span></div>
    </div>
    
    <div class="test-section">
        <h2>主题切换测试</h2>
        <button id="theme-test" class="theme-btn">
            <span id="theme-icon">🌙</span>
            <span id="theme-name">Dark Mode</span>
        </button>
        <div id="status">当前主题: <span id="current-theme">--</span></div>
    </div>
    
    <div class="test-section">
        <h2>测试内容</h2>
        <p data-i18n="test_content">这是测试内容</p>
        <p data-i18n="hero_title">探索我们的太阳系</p>
    </div>
    
    <div class="test-section">
        <h2>访问主页</h2>
        <a href="pages/index.html" style="color: #FFD700;">点击访问主页</a>
    </div>

    <!-- 核心JS文件 -->
    <script src="js/languages.js?v=20250107"></script>
    <script src="js/theme-manager.js?v=20250107"></script>
    
    <script>
        // 翻译数据（简化版）
        const TEST_TRANSLATIONS = {
            zh: {
                'test_content': '这是中文测试内容',
                'hero_title': '探索我们的太阳系'
            },
            en: {
                'test_content': 'This is English test content',
                'hero_title': 'EXPLORE OUR SOLAR SYSTEM'
            }
        };
        
        // 调试函数
        function updateDebugStatus() {
            if (window.languageManager) {
                const lang = window.languageManager.getCurrentLanguage();
                document.getElementById('current-lang').textContent = `${lang.code} (${lang.name})`;
                
                // 更新按钮显示
                const nextLang = lang.code === 'zh' ? 'en' : 'zh';
                const nextLangData = {
                    zh: { flag: '🇨🇳', name: '中文' },
                    en: { flag: '🇺🇸', name: 'English' }
                };
                
                document.getElementById('debug-flag').textContent = nextLangData[nextLang].flag;
                document.getElementById('debug-name').textContent = nextLangData[nextLang].name;
            }
            
            if (window.themeManager) {
                const theme = window.themeManager.getCurrentTheme();
                document.getElementById('current-theme').textContent = theme.name;
                document.getElementById('theme-icon').textContent = theme.icon === '☀️' ? '🌙' : '☀️';
                document.getElementById('theme-name').textContent = theme.name === 'Light' ? 'Dark Mode' : 'Light Mode';
            }
        }
        
        // 测试语言切换
        document.getElementById('lang-test').addEventListener('click', () => {
            if (window.languageManager) {
                const newLang = window.languageManager.currentLanguage === 'en' ? 'zh' : 'en';
                window.languageManager.setLanguage(newLang);
                
                // 手动翻译测试内容
                document.querySelectorAll('[data-i18n]').forEach(element => {
                    const key = element.getAttribute('data-i18n');
                    const translation = TEST_TRANSLATIONS[newLang][key];
                    if (translation) {
                        element.textContent = translation;
                    }
                });
                
                updateDebugStatus();
            }
        });
        
        // 测试主题切换
        document.getElementById('theme-test').addEventListener('click', () => {
            if (window.themeManager) {
                window.themeManager.toggleTheme();
                updateDebugStatus();
            }
        });
        
        // 监听变化事件
        document.addEventListener('languageChanged', updateDebugStatus);
        document.addEventListener('themeChanged', updateDebugStatus);
        
        // 初始化
        setTimeout(updateDebugStatus, 1000);
    </script>
</body>
</html>