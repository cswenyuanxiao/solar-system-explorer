<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>NASA API Integration</title> <link rel="stylesheet" href="../css/style.css"> <link rel="stylesheet" href="../css/optimized.css"> <link rel="stylesheet" href="../css/api-features.css"> <link rel="stylesheet" href="../css/download-manager.css"> </head> <body> <header> <div class="header-content"> <h1>NASA API Integration</h1> <p class="subtitle">Real-time space data and daily astronomy pictures</p> <div class="header-actions"> <a href="index.html" class="action-button">🏠 Home</a> <a href="charts.html" class="action-button">📊 Charts</a> <a href="education.html" class="action-button">📚 Education</a> <button id="themeToggle" class="action-button">🌙</button> </div> </div> </header> <main> <div class="api-key-section"> <h3>🔑 NASA API Key</h3> <div class="api-key-form"> <input type="text" id="apiKeyInput" class="api-key-input" placeholder="Enter your NASA API key (optional)"> <button id="saveApiKey" class="api-key-btn">Save Key</button> <button id="testApiKey" class="api-key-btn">Test Connection</button> <button id="clearApiKey" class="api-key-btn">Clear Key</button> </div> <div class="api-key-info"> <p>💡 Get your free NASA API key at <a href="https://api.nasa.gov/" target="_blank">api.nasa.gov</a></p> <p>Using demo key for now - limited to 1000 requests per day</p> <p id="currentKeyStatus">Current key: Demo</p> </div> </div> <div id="dailyAstronomy"></div> <div class="space-weather"> <h3>🌤️ Space Weather</h3> <div id="spaceWeatherGrid" class="weather-grid"> <div class="weather-item"> <div class="weather-icon">☀️</div> <div class="weather-info"> <h4>Solar Activity</h4> <p id="solarActivity">Loading...</p> </div> </div> <div class="weather-item"> <div class="weather-icon">🌪️</div> <div class="weather-info"> <h4>Solar Flares</h4> <p id="solarFlares">Loading...</p> </div> </div> <div class="weather-item"> <div class="weather-icon">🌍</div> <div class="weather-info"> <h4>Geomagnetic Storms</h4> <p id="geomagneticStorms">Loading...</p> </div> </div> <div class="weather-item"> <div class="weather-icon">🔢</div> <div class="weather-info"> <h4>Sunspot Count</h4> <p id="sunspotCount">Loading...</p> </div> </div> </div> </div> <div class="daily-fact"> <h3>🌟 Daily Space Fact</h3> <p id="dailySpaceFact">Loading...</p> </div> <div class="api-stats"> <h3>📊 API Statistics</h3> <div id="apiStatsGrid" class="stats-grid"> <div class="stat-item"> <span class="stat-value" id="cacheSize">0</span> <span class="stat-label">Cached Items</span> </div> <div class="stat-item"> <span class="stat-value" id="errorCount">0</span> <span class="stat-label">Errors</span> </div> <div class="stat-item"> <span class="stat-value" id="apiKeyType">Demo</span> <span class="stat-label">API Key Type</span> </div> <div class="stat-item"> <span class="stat-value" id="lastError">None</span> <span class="stat-label">Last Error</span> </div> </div> </div> </main> <footer> <p>&copy; 2024 Solar System Explorer. NASA API integration for educational purposes.</p> </footer> <script src="../js/app.js"></script> <script src="../js/lazy-loading.js"></script> <script src="../js/download-manager.js"></script> <script src="../js/nasa-api.js"></script> <script src="../js/daily-astronomy.js"></script> <script> // Simplified API key management now that loading is more robust document.addEventListener('DOMContentLoaded', () => { // Wait a bit for NASA API class to be available setTimeout(() => { if (!window.nasaAPI) { try { window.nasaAPI = new NASAAPI(); console.log('NASA API initialized successfully'); } catch (error) { console.error('Failed to initialize NASA API:', error); } } setupDirectEventListeners(); loadSavedKey(); updateStatus(); loadSpaceWeather(); loadDailySpaceFact(); }, 100); }); function setupDirectEventListeners() { document.getElementById('saveApiKey')?.addEventListener('click', handleSaveKey); document.getElementById('testApiKey')?.addEventListener('click', handleTestConnection); document.getElementById('clearApiKey')?.addEventListener('click', handleClearKey); } function handleSaveKey() { const key = document.getElementById('apiKeyInput').value.trim(); if (key && window.nasaAPI) { window.nasaAPI.setAPIKey(key); showNotification('✅ API key saved successfully!'); updateStatus(); } else { showNotification('❌ Please enter a valid API key'); } } function handleTestConnection() { if (window.nasaAPI) { showNotification('🔄 Testing API connection...'); window.nasaAPI.testConnection().then(result => { showNotification(result.success ? '✅ API connection successful!' : `❌ API connection failed: ${result.message}`); }).catch(error => { showNotification(`❌ API test failed: ${error.message}`); }); } } function handleClearKey() { if (window.nasaAPI) { window.nasaAPI.setAPIKey('DEMO_KEY'); document.getElementById('apiKeyInput').value = ''; showNotification('🗑️ API key cleared, using demo key'); updateStatus(); } } function loadSavedKey() { const savedKey = localStorage.getItem('nasa_api_key'); if (savedKey && savedKey !== 'DEMO_KEY') { document.getElementById('apiKeyInput').value = savedKey; } } function updateStatus() { if (window.nasaAPI) { const keyType = window.nasaAPI.apiKey === 'DEMO_KEY' ? 'Demo' : 'Custom'; document.getElementById('currentKeyStatus').textContent = `Current key: ${keyType}`; } } function showNotification(message) { const notification = document.createElement('div'); notification.className = 'toast-notification'; notification.textContent = message; document.body.appendChild(notification); setTimeout(() => notification.remove(), 3000); } function loadSpaceWeather() { if (window.nasaAPI) { try { const weather = window.nasaAPI.getSpaceWeather(); document.getElementById('solarActivity').textContent = weather.condition; document.getElementById('solarFlares').textContent = weather.solarFlare ? 'Active' : 'Quiet'; document.getElementById('geomagneticStorms').textContent = weather.geomagneticStorm ? 'Active' : 'Quiet'; document.getElementById('sunspotCount').textContent = weather.sunspotCount; } catch (error) { console.error('Error loading space weather:', error); document.getElementById('solarActivity').textContent = 'Low'; document.getElementById('solarFlares').textContent = 'Quiet'; document.getElementById('geomagneticStorms').textContent = 'Quiet'; document.getElementById('sunspotCount').textContent = '12'; } } else { console.error('NASA API not available'); document.getElementById('solarActivity').textContent = 'Low'; document.getElementById('solarFlares').textContent = 'Quiet'; document.getElementById('geomagneticStorms').textContent = 'Quiet'; document.getElementById('sunspotCount').textContent = '12'; } } function loadDailySpaceFact() { if (window.nasaAPI) { window.nasaAPI.getDailySpaceFact().then(fact => { document.getElementById('dailySpaceFact').textContent = fact; }).catch((error) => { console.error('Error loading daily space fact:', error); document.getElementById('dailySpaceFact').textContent = "The Sun contains 99.86% of the solar system's mass."; }); } else { console.error('NASA API not available'); document.getElementById('dailySpaceFact').textContent = "The Sun contains 99.86% of the solar system's mass."; } } </script> </body> </html>